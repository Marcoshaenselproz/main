table MATRIZ_INDICADORES_TOTAL
	lineageTag: d23e641c-26cb-41f3-8098-c96f31cb58e9

	measure VALOR_MATRIZ_META_TOTAL = ```
			
			VAR IndicadorSelecionado = SELECTEDVALUE(MATRIZ_INDICADORES_TOTAL[Indicador])
			VAR MetricaSelecionada = SELECTEDVALUE(MATRIZ_INDICADORES_TOTAL[MÃ©trica])
			VAR ValorBruto = 
			    SWITCH(
			        TRUE(),
			        IndicadorSelecionado = "MatrÃ­culas" && MetricaSelecionada = "Meta", [Total Mat Meta BP],
			        IndicadorSelecionado = "MatrÃ­culas" && MetricaSelecionada = "Real", [Total Mat Geral],
			        IndicadorSelecionado = "MatrÃ­culas" && MetricaSelecionada = "% Ating", [% Total Mat Meta BP],
			        IndicadorSelecionado = "Leads" && MetricaSelecionada = "Meta", [Total Leads Meta],
			        IndicadorSelecionado = "Leads" && MetricaSelecionada = "Real", [Total Leads],
			        IndicadorSelecionado = "Leads" && MetricaSelecionada = "% Ating", [% Total Leads Meta],
			        IndicadorSelecionado = "Leads Pagos" && MetricaSelecionada = "Meta", [Total Leads Meta Pago],
			        IndicadorSelecionado = "Leads Pagos" && MetricaSelecionada = "Real", [Total Leads Pago],
			        IndicadorSelecionado = "Leads Pagos" && MetricaSelecionada = "% Ating", [% Total Leads Meta Pago],
			        IndicadorSelecionado = "% Leads Pagos" && MetricaSelecionada = "Meta", [% Total Leads Meta Pago Share],
			        IndicadorSelecionado = "% Leads Pagos" && MetricaSelecionada = "Real", [% Total Leads Pago],
			        IndicadorSelecionado = "% Leads Pagos" && MetricaSelecionada = "% Ating", [Total Leads Meta Pago Share p.p],
			           IndicadorSelecionado = "Leads NÃ£o Pagos" && MetricaSelecionada = "Meta", [Total Leads Meta NÃ£o Pago],
			        IndicadorSelecionado = "Leads NÃ£o Pagos" && MetricaSelecionada = "Real", [Total Leads NÃ£o Pago],
			        IndicadorSelecionado = "Leads NÃ£o Pagos" && MetricaSelecionada = "% Ating", [% Total Leads Meta NÃ£o Pago],
			
			           IndicadorSelecionado = "ConversÃ£o Geral" && MetricaSelecionada = "Meta", [ConversÃ£o Geral Meta],
			        IndicadorSelecionado = "ConversÃ£o Geral" && MetricaSelecionada = "Real", [ConversÃ£o Geral],
			        IndicadorSelecionado = "ConversÃ£o Geral" && MetricaSelecionada = "% Ating", [ConversÃ£o Geral Meta p.p],
			
			
			                   IndicadorSelecionado = "Investimento" && MetricaSelecionada = "Meta", [Total Investimento Meta],
			        IndicadorSelecionado = "Investimento" && MetricaSelecionada = "Real", [Total Investimento],
			        IndicadorSelecionado = "Investimento" && MetricaSelecionada = "% Ating", [% Total Investimento],
			
			         IndicadorSelecionado = "CPL" && MetricaSelecionada = "Meta", [Total CPL Meta Pago],
			        IndicadorSelecionado = "CPL" && MetricaSelecionada = "Real", [Total CPL Pago],
			        IndicadorSelecionado = "CPL" && MetricaSelecionada = "% Ating", [Total CPL Meta Pago Dif],
			        BLANK()
			    )
			
			RETURN 
			    IF(
			        MetricaSelecionada = "% Ating" || IndicadorSelecionado = "% Leads Pagos" || IndicadorSelecionado = "ConversÃ£o Geral", 
			        FORMAT(ValorBruto, "0.0%"), 
			        FORMAT(ValorBruto, "#,###")
			
			    )
			```
		lineageTag: 856e965e-ccce-412e-b040-fcaa62c31139

	measure '% Ating com Ãcones MATRIZ_TOTAL' = ```
			
			VAR ValorTexto = TRIM([VALOR_MATRIZ_META_TOTAL]) // Remove espaÃ§os extras
			// Verifica se o valor contÃ©m "p.p" ou "%" para definir o tratamento adequado
			VAR ContemPP = SEARCH("p.p", ValorTexto, 1, 0) > 0
			VAR ContemPorcento = SEARCH("%", ValorTexto, 1, 0) > 0
			// Remove os indicadores de texto para conversÃ£o numÃ©rica
			VAR ValorLimpo = SUBSTITUTE(SUBSTITUTE(ValorTexto, " p.p", ""), "%", "")
			// Converte para nÃºmero, mas sÃ³ divide por 100 se for percentual ("%")
			VAR ValorNumerico = 
			    IF(
			        ValorTexto = "" || ValorTexto = BLANK(), 
			        BLANK(), 
			        VALUE(ValorLimpo) / IF(ContemPorcento, 100, 1) // Divide por 100 apenas para "%"
			    )
			RETURN 
			    IF(
			        ISBLANK(ValorNumerico), 
			        BLANK(),  // MantÃ©m valores em branco sem erro
			        SWITCH(
			            TRUE(),
			            // FormataÃ§Ã£o para "% Ating"
			            SELECTEDVALUE(MATRIZ_INDICADORES_TOTAL[MÃ©trica]) = "% Ating",
			                SWITCH(
			                    TRUE(),
			                    // Tratamento especÃ­fico para CPL dentro de "% Ating"
			                    SELECTEDVALUE(MATRIZ_INDICADORES_TOTAL[Indicador]) = "CPL",
			                        IF(
			                            ValorNumerico > 0, 
			                            "ðŸ”´ " & ValorTexto,  // Valor positivo â†’ vermelho
			                            "ðŸŸ¢ " & ValorTexto   // Valor negativo ou zero â†’ verde
			                        ),
			                     SELECTEDVALUE(MATRIZ_INDICADORES_TOTAL[Indicador]) = "ConversÃ£o Geral",
			                        IF(
			                            ValorNumerico > 0, 
			                            "ðŸŸ¢ " & ValorTexto,  // Valor positivo â†’ vermelho
			                            "ðŸ”´ " & ValorTexto   // Valor negativo ou zero â†’ verde
			                        ),
			                    // Ãcones para outros indicadores em "% Ating"
			                    ValorNumerico >= [% D.U Real], "ðŸŸ¢ " & ValorTexto,  // Meta atingida ou superada â†’ cÃ­rculo verde
			                    ValorNumerico >= 0, "ðŸŸ¡ " & ValorTexto,  // Entre 0% e meta â†’ cÃ­rculo amarelo
			                    ValorNumerico < [% D.U Real], "ðŸ”´ " & ValorTexto,  // Abaixo de 0% â†’ cÃ­rculo vermelho
			                    ValorTexto // Caso padrÃ£o
			                ),
			            
			            // Para todos os outros indicadores, mantÃ©m o formato original
			            ValorTexto
			        )
			    )
			```
		lineageTag: 45a2548f-4818-4405-971b-e6bef3872a85

	column Indicador
		lineageTag: 95e6f921-0f6e-4076-b85c-52a5a45522fd
		summarizeBy: none
		isNameInferred
		sourceColumn: [Indicador]
		sortByColumn: Ordem_Indicador

		annotation SummarizationSetBy = Automatic

	column Ordem_Indicador
		formatString: 0
		lineageTag: 2cd193b9-a1b1-418d-9d5c-6a2c4f26e335
		summarizeBy: sum
		isNameInferred
		sourceColumn: [Ordem_Indicador]

		annotation SummarizationSetBy = Automatic

	column MÃ©trica
		lineageTag: 50b13148-a41b-4170-8426-837a0818e8ef
		summarizeBy: none
		isNameInferred
		sourceColumn: [MÃ©trica]
		sortByColumn: Ordem_MÃ©trica

		annotation SummarizationSetBy = Automatic

	column Ordem_MÃ©trica
		formatString: 0
		lineageTag: 2a16394c-4911-4a47-995c-d023e81ff8cb
		summarizeBy: sum
		isNameInferred
		sourceColumn: [Ordem_MÃ©trica]

		annotation SummarizationSetBy = Automatic

	partition MATRIZ_INDICADORES_TOTAL = calculated
		mode: import
		source = ```
				
				DATATABLE(
				    "Indicador", STRING,
				    "Ordem_Indicador", INTEGER,
				    "MÃ©trica", STRING,
				    "Ordem_MÃ©trica", INTEGER,
				    {
				        {"MatrÃ­culas", 1, "Meta", 1},
				        {"MatrÃ­culas", 1, "Real", 2},
				        {"MatrÃ­culas", 1, "% Ating", 3},
				        {"Leads", 2, "Meta", 1},
				        {"Leads", 2, "Real", 2},
				        {"Leads", 2, "% Ating", 3},
				        {"Leads Pagos", 3, "Meta", 1},
				        {"Leads Pagos", 3, "Real", 2},
				        {"Leads Pagos", 3, "% Ating", 3},
				        {"% Leads Pagos", 4, "Meta", 1},
				        {"% Leads Pagos", 4, "Real", 2},
				        {"% Leads Pagos", 4, "% Ating", 3},
				        {"Leads NÃ£o Pagos", 5, "Meta", 1},
				        {"Leads NÃ£o Pagos", 5, "Real", 2},
				        {"Leads NÃ£o Pagos", 5, "% Ating", 3},
				        {"ConversÃ£o Geral", 6, "Meta", 1},
				        {"ConversÃ£o Geral", 6, "Real", 2},
				        {"ConversÃ£o Geral", 6, "% Ating", 3},
				        {"Investimento", 7, "Meta", 1},
				        {"Investimento", 7, "Real", 2},
				        {"Investimento", 7, "% Ating", 3},
				        {"CPL", 8, "Meta", 1},
				        {"CPL", 8, "Real", 2},
				        {"CPL", 8, "% Ating", 3}
				
				
				
				    }
				)
				
				```

	annotation PBI_Id = 08b4a6430d924404b8d6c53b3ebc9b2a

